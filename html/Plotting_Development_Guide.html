

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Visualization Development Guide &mdash; vfo 0.0.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Plotting OpenSees Tcl Output" href="plotting_OpenSeesTcl.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> vfo
          

          
          </a>

          
            
            
              <div class="version">
                0.0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="createODB.html">Create Output Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="saveFiberData2D.html">saveFiberData2D command</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_model.html">plot_model command</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_modeshape.html">plot_modeshape command</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_deformedshape.html">plot_deformedshape command</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_fiberResponse2D.html">plot_fiberResponse2D command</a></li>
<li class="toctree-l1"><a class="reference internal" href="animate_deformedshape.html">animate_deformedshape command</a></li>
<li class="toctree-l1"><a class="reference internal" href="animate_fiberResponse2D.html">animate_fiberResponse2D command</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting_OpenSeesTcl.html">Plotting OpenSees Tcl Output</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Visualization Development Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#internal-database-functions">Internal Database functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#internal-plotting-functions">Internal Plotting functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-functions">User functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-of-an-internal-function">Example of an internal function</a></li>
<li class="toctree-l2"><a class="reference internal" href="#naming-conventions">Naming conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wish-list">Wish List</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">vfo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Visualization Development Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Plotting_Development_Guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="visualization-development-guide">
<h1>Visualization Development Guide<a class="headerlink" href="#visualization-development-guide" title="Permalink to this headline">¶</a></h1>
<p>You are welcome to contribute to the plotting/post-processing commands. This documentation is to explain what is going on inside
the plotting library “Get_Rendering” and how you can enhance the functons. As of now, Get_Rendering has functions
to plot a structure, mode shapes and shape of a displaced structure and works for 2D (beam-column elements,
tri, and quad) and 3D (beam-column, tri, 4-node shell, and 8-node brick) elements.</p>
<p>As of now, all plotting functions should use Matplotlib only and should be able to produce interactive plots. Developers should test
the new functions extensively , including on Jupyter Notebook, before submitting a pull request.</p>
<p><strong>Note:</strong> A list of test examples will be available soon.</p>
<p>The source code of all the plotting functions is located in <a class="reference external" href="https://github.com/zhuminjie/OpenSeesPy/tree/master/openseespy-pip/openseespy/postprocessing">OpenSeesPy</a> repository.</p>
<p>As an object oriented approach and to reduce the code repetition, Get_Rendering uses two types of functions.</p>
<div class="section" id="internal-database-functions">
<h2>Internal Database functions<a class="headerlink" href="#internal-database-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions get, write to and read data from output database.</p>
<p><code class="docutils literal notranslate"><span class="pre">_getNodesandElements()</span></code> : Gets node and element tags from the active model, stores node tags with coordinates and element tags with connected nodes in numpy arrays.</p>
<p><code class="docutils literal notranslate"><span class="pre">_saveNodesandElements()</span></code> :  Saves the node and element arrays from _getNodesandElements() to text files with “.out” extension.</p>
<p><code class="docutils literal notranslate"><span class="pre">_readNodesandElements()</span></code> :  Reads the node and element data into numpy arrays from the saved files.</p>
<p><code class="docutils literal notranslate"><span class="pre">_getModeShapeData()</span></code> : Gets node deflection for a particular mode from the active model, stores node tags with modeshape data in numpy arrays.</p>
<p><code class="docutils literal notranslate"><span class="pre">_saveModeShapeData()</span></code> : Saves the modeshape data arrays from _getModeShapeData() to text files with “.out” extension.</p>
<p><code class="docutils literal notranslate"><span class="pre">_readModeShapeData()</span></code> : Reads the modeshape data into numpy arrays from the saved files.</p>
<p><code class="docutils literal notranslate"><span class="pre">_readNodeDispData()</span></code> : Reads the node displacement data into numpy arrays from the saved files (from createODB() command).</p>
<p><code class="docutils literal notranslate"><span class="pre">_readFiberData2D()</span></code> : Reads the section fiber output data into numpy arrays from the saved files (from saveFiberData2D() command).</p>
</div>
<div class="section" id="internal-plotting-functions">
<h2>Internal Plotting functions<a class="headerlink" href="#internal-plotting-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions are helper functions that are called by the user functions once the updated
node coordinates are calculated.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotBeam2D()</span></code> : A procedure to plot a 2D beam-column (or any element with 2 nodes) using iNode, jNode and some internal variables as input.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotBeam3D()</span></code> : A procedure to plot a 3D beam-column (or any element with 2 nodes) using iNode, jNode and some internal variables as input.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotTri2D()</span></code> :  A procedure to render a 2D, three node shell (Tri) element using iNode, jNode, kNode in counter-clockwise order and some internal variables as input.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotTri3D()</span></code> :  A procedure to render a 3D, three node shell (Tri) element using iNode, jNode, kNode in counter-clockwise order and some internal variables as input.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotQuad2D()</span></code> : A procedure to render a 2D, four node shell (Quad, ShellDKGQ etc.) element using iNode, jNode, kNode, lNode in counter-clockwise and some internal variables as input.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotQuad3D()</span></code> : A procedure to render a 3D, four node shell (Quad, ShellDKGQ etc.) element using iNode, jNode, kNode, lNode in counter-clockwise and some internal variables as input.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotCubeSurf()</span></code> : This procedure is called by the <cite>plotCubeVol()</cite> command to render each surface in a cube using four corner nodes.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotCubeVol()</span></code> : A procedure to render a 8-node brick element using a list of eight element nodes in bottom and top faces and in counter-clockwise order, and internal variables as input.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotEle_2D()</span></code> : A procedure to plot any 2D element by calling other internal plotting commands for 2D elements.</p>
<p><code class="docutils literal notranslate"><span class="pre">_plotEle_3D()</span></code> : A procedure to plot any 3D element by calling other internal plotting commands for 3D elements.</p>
<p><code class="docutils literal notranslate"><span class="pre">_initializeFig()</span></code> : Initializes a matplotlib.pyplot figure for each of the user plotting commands. This procedure reduced the code repetition.</p>
<p><code class="docutils literal notranslate"><span class="pre">_setStandardViewport()</span></code> : Sets a standard viewport for matplotlib.pyplot figure for each of the user plotting commands. This procedure reduced the code repetition.</p>
</div>
<div class="section" id="user-functions">
<h2>User functions<a class="headerlink" href="#user-functions" title="Permalink to this headline">¶</a></h2>
<p>These are the functions available to users to call through OpenSeesPy script. The following table describes what they are and how they work.</p>
<p><code class="docutils literal notranslate"><span class="pre">createODB()</span></code> : Redords the model and loadcase data to be used by other plotting functions in a user defined output folder.</p>
<p><code class="docutils literal notranslate"><span class="pre">saveFiberData2D()</span></code> : Redords the output data from all the fibers in a particular section to plot the distribution.</p>
<p><code class="docutils literal notranslate"><span class="pre">plot_model()</span></code> : Gets the number of nodes and elements in lists by calling <cite>getNodeTags()</cite> and <cite>getEleTags()</cite>. Then plots the elements in a loop by checking if the model is 2D or 3D, and calling the <cite>nodecoord()</cite> command for each node to get its original coordinates and internal function <cite>_plotBeam3D</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">plot_modeshapes()</span></code> : Gets the number of nodes and elements in lists by calling <cite>getNodeTags()</cite> and <cite>getEleTags()</cite>. In a loop, calls <cite>nodecoord()</cite> and <cite>nodeEigenvector()</cite> for each node to get original and eigen coordinates respectively. Then plots the mode shape by calling the internal functions.</p>
<p><code class="docutils literal notranslate"><span class="pre">plot_deformedshape()</span></code>: Reads the displacement data from the output of <cite>createODB()</cite> function and original coordinates using <cite>nodecoord()</cite> function. Then plots the displaced shape of the structure using the internal functions in a manner similar to <cite>plot_modeshapes()</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">plot_fiberResponse2D()</span></code>: Reads the fiber output data from the output of <cite>saveFiberData2D()</cite> function and plots the distribution across the section.</p>
<p><code class="docutils literal notranslate"><span class="pre">animate_deformedshape()</span></code>: Reads the displacement data from the output of <cite>createODB()</cite> function and original coordinates using <cite>nodecoord()</cite> function. Then animates the displaced shape of the structure.</p>
<p><code class="docutils literal notranslate"><span class="pre">animate_fiberResponse2D()</span></code>: Reads the fiber output data from the output of <cite>saveFiberData2D()</cite> function and animates the stress/strain distribution across the section.</p>
</div>
<div class="section" id="example-of-an-internal-function">
<h2>Example of an internal function<a class="headerlink" href="#example-of-an-internal-function" title="Permalink to this headline">¶</a></h2>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">_plotQuad3D()</span></code> internal function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_plotQuad3D</span><span class="p">(</span><span class="n">iNode</span><span class="p">,</span> <span class="n">jNode</span><span class="p">,</span> <span class="n">kNode</span><span class="p">,</span> <span class="n">lNode</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">show_element_tags</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">eleStyle</span><span class="p">,</span> <span class="n">fillSurface</span><span class="p">)</span>
</pre></div>
</div>
<p>This function uses the following inputs:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a href="#id2"><span class="problematic" id="id3">*</span></a>Nodes</p></td>
<td><p>iNode, jNode, kNode, lNode : A list of four nodes in counter-clockwise order.</p></td>
</tr>
<tr class="row-even"><td><p>ax</p></td>
<td><p>Reference to the Matplotlib fixure axes space. This should not be changed.</p></td>
</tr>
<tr class="row-odd"><td><p>show_element_tags</p></td>
<td><dl class="simple">
<dt>The default is set to “yes” for plotting the model with <code class="docutils literal notranslate"><span class="pre">plot_model()</span></code> and “no” while plotting mode shapes</dt><dd><p>or deformed shapes. This should not be changed.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>element</p></td>
<td><p>This is the tag of that particular element as a string which is displayed when show_element_tags=”yes”.</p></td>
</tr>
<tr class="row-odd"><td><p>eleStyle</p></td>
<td><dl class="simple">
<dt>Use eleStyle = “wire” for a wire frame, and “solid” for solid element lines. Wire frame is used when</dt><dd><p>overlapping the original shape of the structure with the mode shape or displaced shape.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>fillSurface</p></td>
<td><p>Use fillSurface = “yes” for color fill in the elements. fillSurface=”no” for wireframe.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="naming-conventions">
<h2>Naming conventions<a class="headerlink" href="#naming-conventions" title="Permalink to this headline">¶</a></h2>
<p>The names of classes, variables, and functions should be self-explanatory. Look for names that give useful information about the meaning of the variable or function.
All the internal functions should start with “<code class="docutils literal notranslate"><span class="pre">_</span></code>” and be in camelCase (for example <code class="docutils literal notranslate"><span class="pre">_plotCubeSurf</span></code>) to distinguish them from the user functions. There are two type of
user functions, 1) recorder functions and 2) plot functions. All the “recorder” functions should start with “record” and use camelCase (example: <code class="docutils literal notranslate"><span class="pre">recordNodeDisp</span></code>) and
the plotting functions should start with “<code class="docutils literal notranslate"><span class="pre">plot_</span></code>” use snake_case (example: <code class="docutils literal notranslate"><span class="pre">plot_deformedshape</span></code>). Try to keep the internal variables (see 3. Example) consistant. New internal variable should be
defined only if necessary.</p>
</div>
<div class="section" id="wish-list">
<h2>Wish List<a class="headerlink" href="#wish-list" title="Permalink to this headline">¶</a></h2>
<p>Some functions helpful to users might include, but not limited to,</p>
<ul class="simple">
<li><p>plot_stress() : Record stress in all the elements of a function and plot. This will be useful in visualization of shear walls, fluid-structure interaction and soil modeled as brick elements.</p></li>
<li><p>plot_strain() : Similar functionality as above.</p></li>
<li><p>plot_sectionfiber() : Visualize stress-strain distribution accross a fiber section in a non-linear beam-column element.</p></li>
<li><p>plot_elementforces() : Element forces such as moment, shear, axial force.</p></li>
<li><p>animate_elementstress() : Animation of the stress or strain in a structure.</p></li>
</ul>
<p>Feel free to comment and discuss how to streamline your plotting code with the existing <code class="docutils literal notranslate"><span class="pre">Get_Rendering</span></code> library. Or contact me
<a class="reference external" href="https://github.com/u-anurag">Anurag Upadhyay</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="plotting_OpenSeesTcl.html" class="btn btn-neutral float-left" title="Plotting OpenSees Tcl Output" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2022, Anurag Upadhyay

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>